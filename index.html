<!DOCTYPE html>
<html>
<head>
  <title>Papyrus App</title>
  
  <link rel="icon" href="public\assets\papyrus_logo.png" type="image/png"> 
  <meta name="viewport" content="width=device-width">

  <link rel="stylesheet" type="text/css" href="styles/login.css" />
  <link rel="stylesheet" type="text/css" href="styles/menu.css" />

</head>
<body>
  <!--
  <h1>Welcome to OAuth App</h1>
  <a href="/auth/google">Authenticate with Google</a>
-->

  <body>
    <nav class="navbar login">
      <div class="logo">
          <a href="https://papyrusai.webflow.io/" target="_blank">
            <img src="assets/papyrus_app_white.png" alt="Papyrus Logo">
          </a>
        </div>
     <button class="hamburger login" onclick="toggleMenu()">☰</button> 
      <ul class="menu">
        <li><a href="https://papyrusai.webflow.io/">WEB</a></li>
        <li><a href="https://papyrus-ai.com/profile">PANEL DE CONTROL</a></li> <!--cambiar-->
        <li><a href="http://papyrus-ai.com/suscripcion.html">EDITAR SUSCRIPCIÓN</a></li>
        <li><a href="https://papyrusai.webflow.io/pages/contact-1">AYUDA</a></li>
      </ul>
    </nav>
<section class="login-form">
    <div class="container">
        <div class="login-section">
          <div class="logo">
            <a href="https://papyrusai.webflow.io/" target="_blank">
              <img class ="login-image"src="assets/papyrus_app.png" alt="Papyrus Logo">
            </a>
            
          </div>
            <h1>Inicia Sesión</h1>
            <div>
              <a id="google-login-btn" class="login-btn google-login" href="/auth/google" onclick="showLoading()">
                <div id="google-login">
                  <img src="assets/google_trans-removebg-preview.png" alt="Google Logo">
                  Google
                </div>
                <span id="loading-icon" style="display: none;">
                  <div class="loader-google"></div>
                </span>
              </a>
            <p class="temporal-uno">Accede a toda la información normativa del territorio español</p>
            <p class="temporal">Recibe alertas, resúmenes y gráficos <strong> personalizados</strong>.</p>
          </div>
          <!--
          
          <div class="divider">
            <span>O con email y contraseña</span>
        </div>

          <div>
            <form action="/login" method="post">
                <input type="email" name="email" placeholder="Email Address" required>
                <button type="submit">Siguiente</button>
            </form>
          </div>
           -->

        </div>

        <div class="info-section">
            <h2>Recibe acceso gratuito a Alertas Normativas</h2>
            <p>Filtra de manera automática todo el contenido normativo con nuestra IA </p>
            <p>Recibe alertas, resúmenes y gráficos <strong>personalizados</strong>.</p>
        </div>
    </div>
  </section>
</body>
</body>

<script>
function resetLoginButton() {
    const loginButton = document.getElementById('google-login-btn');
    const googleLoginText = document.getElementById('google-login');
    const loadingIcon = document.getElementById('loading-icon');

    // Reset classes
    if (googleLoginText) {
      googleLoginText.style = '';
      googleLoginText.offsetHeight; // Trigger reflow
        googleLoginText.classList.remove('hidden');
        googleLoginText.classList.add('visible');
    }

    if (loadingIcon) {
      loadingIcon.offsetHeight; // Trigger reflow
        loadingIcon.classList.remove('visible');
        loadingIcon.classList.add('hidden');
    }

    if (loginButton) {
        loginButton.classList.remove('disabled');
        loginButton.style.pointerEvents = 'auto'; // Allow clicks again
    }

    console.log('Reset login button styles applied.');
}

  function showLoading() {
    const googleLoginText = document.getElementById('google-login');
    const loadingIcon = document.getElementById('loading-icon');

    // Hide the Google text and show the loading icon
    if (googleLoginText) {
      
      googleLoginText.classList.remove('visible');
      
      googleLoginText.classList.add('hidden');
    }
    if (loadingIcon) {
      
      loadingIcon.classList.remove('hidden'); 
      
      loadingIcon.classList.add('visible'); 
      loadingIcon.style.display = 'inline-block';
    }

    // Disable the button to prevent multiple clicks
    const loginButton = document.getElementById('google-login-btn');
    if (loginButton) {
      loginButton.style.pointerEvents = 'none';
    }
  }
// Use `pageshow` to ensure reset on navigation
window.addEventListener('pageshow', () => {
    resetLoginButton(); // Ensure the button is reset every time the page is shown
});

//  document.addEventListener('DOMContentLoaded', resetLoginButton);

  function toggleMenu() {
        const menu = document.querySelector('.menu');
        menu.classList.toggle('active');
         }
         // Close the menu if clicking outside of it
document.addEventListener('click', function(event) {
    const menu = document.querySelector('.menu');
    const hamburger = document.querySelector('.hamburger');
    
    if (!menu.contains(event.target) && !hamburger.contains(event.target)) {
        menu.classList.remove('active');
    }
});
</script>

</html>
