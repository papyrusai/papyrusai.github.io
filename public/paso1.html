<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Onboarding Papyrus</title>
  <link rel="icon" href="assets\papyrus_logo.png" type="image/png"> 
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Satoshi&family=Instrumental+Serif&display=swap">
  <link rel="stylesheet" href="https://api.fontshare.com/v2/css?f[]=satoshi@400,500,600,700&display=swap">


  <link rel="stylesheet" href="styles/menu.css">
  <link rel="stylesheet" href="styles/onboarding.css">
  <style>
    /* --- Additional adjustments for a leaner step1 --- */
    body, .container, .formulario {
      font-size: 0.85em; /* overall font-size reduced */
    }
    .form-group, .section, .dropdown-group {
      margin-bottom: 10px;
      padding: 5px;
    }
    /* Siguiente button updated */
    .btn-siguiente {
      background-color: var(--text-color);
      color: white;
      border: none;
    padding: 5px 10px;
    font-size: 16px;
    border-radius: 20px;
    cursor: pointer;
    border: none;
    }
    /* Dropdown group styles (for both perfiles and cobertura) */
    .dropdown-group {
      position: relative;
      margin-top: 5px;
    }

    
    .form-group {
  /*background: linear-gradient(135deg, #f8f8f8 0%, #ffffff 100%);*/
  /*border-left: 4px solid var(--primary-color);*/
  border-radius: 8px;
  padding: 16px 20px;
  margin: 20px 0;
  /*box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);*/
  transition: all 0.3s ease;
}

.form-group:hover {
 /* transform: translateY(-2px);*/
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08); 
  /*border-left: 4px solid var(--primary-color);*/
}

.form-group span {
  color: var(--text-color);
  font-weight: 600;
  font-size: 14px;
  margin-bottom: 6px;
}

.form-group .highlight {
  color: var(--primary-color);
  font-weight: 700;
}

.form-group .description {
  color: var(--secondary-color);
  font-size: 14px;
  line-height: 1.5;
}

.area-interes{
          width: 700px;
    height: 114px;
    border-radius: 15px;
    padding: 7px 15px;
    }
    .dropdown-options {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background-color: white;
      border: 1px solid var(--border-color);
      border-radius: 4px;
      max-height: 150px;
      overflow-y: auto;
      min-width: 200px; /* Ancho mínimo para el dropdown */
      width: 450px;
      z-index: 100;
      background-color: white !important; /* Forzar color de fondo */
      z-index: 1050 !important; /* Valor alto para asegurar que esté por encima de otros elementos */
      opacity: 1 !important; /* Forzar opacidad completa */
      box-shadow: 0 4px 8px rgba(0,0,0,0.15) !important; /* Sombra más pronunciada */
    }

    .dropdown-options label {
      white-space: nowrap; /* Evitar que el texto se rompa en múltiples líneas */
      overflow: hidden;
      text-overflow: ellipsis; /* Añadir puntos suspensivos si el texto es demasiado largo */
    }

    /* Mantener el tamaño del botón */
    .dropdown-toggle {
      width: auto !important; /* Mantener el ancho original */
      min-width: 200px; /* Establecer un ancho mínimo */
    }

    .dropdown-options .checkbox-item {
      padding: 5px 10px;
      border-bottom: solid 1px #ccc;
    }
    .selected-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      margin-top: 5px;
    }
    .selected-tags .tag {
      margin: 0;
    }
 
    /*--------Skeloton loader--------------*/
    /* Estilos mejorados para el skeleton loader */
/* Estilos mejorados para el skeleton loader */
.skeleton-container {
  width: 100%;
  padding: 10px 0;
}

.skeleton-section {
  margin-bottom: 20px;
}

.skeleton-item {
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: 4px;
  margin-bottom: 10px;
}

.skeleton-item.title {
  width: 70%;
  height: 30px;
  margin-bottom: 10px;
}

.skeleton-item.subtitle {
  width: 90%;
  height: 20px;
  margin-bottom: 20px;
}

.skeleton-item.section-title {
  width: 50%;
  height: 20px;
  margin-bottom: 15px;
}

.skeleton-checkbox-group {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.skeleton-item.checkbox {
  width: 100%;
  height: 40px;
  border-radius: 6px;
}

.skeleton-item.input-field {
  width: 100%;
  height: 45px;
  border-radius: 6px;
}

.skeleton-item.button {
  width: 140px;
  height: 45px;
  border-radius: 20px;
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.hidden {
  display: none !important;
}


    @keyframes shimmer {
      0% {
        background-position: -200% 0;
      }
      100% {
        background-position: 200% 0;
      }
    }

    .hidden {
      display: none !important;
    }


    @media (max-width: 600px) {
  .area-interes {
    height: 243px;
    width: 276px;
  }

  .dropdown-options {
    width: 276px;
  }
}
  </style>
</head>
<body>
  
  <nav class="navbar">
    <div class="logo">
        <a href="https://www.papyrus-ai.com/" target="_blank">
          <img src="assets/papyrus_app.png" alt="Papyrus Logo">
        </a>
      </div>
   <button class="hamburger" onclick="toggleMenu()">☰</button> 
   <ul class="menu">
    <li><a href="https://papyrus-ai.com/">WEB</a></li>
    <li><a href="https://app.papyrus-ai.com/profile">PANEL DE CONTROL</a></li> <!--cambiar-->
    <li><a href="https://papyrus-ai.com/pages/contact-1">AYUDA</a></li>
  </ul>
  </nav>

  <div class="container">
    <!-- Progress Bar (steps remain as Plan / Perfil / Personalización) -->
    <div class="progress-container">
      <div class="progress-steps">
        <div class="step active">Perfil</div>
        <div class="step">Personalización</div>
        <div class="step">Suscripción</div>
      </div>
      <div class="progress-bar">
        <div class="progress-fill"></div>
      </div>
    </div>

    <div class="formulario">
         
      <h2>Información de Usuario</h2>
      <form id="onboardingForm">
        <!-- Perfil Section -->
        <div class="section">
          
          <h3>Perfil</h3>
          <div class="form-group">
            <label for="nombre">Nombre</label>
            <input type="text" id="nombre" name="nombre" placeholder="Introduce tu nombre" required>
          </div>
           
          <!-- Perfiles profesionales dropdown -->
          <div class="form-group">
            <label>Perfil profesional</label>
            <!-- Selected profiles will appear here -->
            <div id="perfil-selected" class="selected-tags"></div>
            <div class="dropdown-group">
              <button type="button" class="dropdown-toggle" onclick="toggleDropdown('perfil-dropdown')">Selecciona perfil profesional </button>
              <div id="perfil-dropdown" class="dropdown-options">
                <div class="checkbox-item">
                  <input type="checkbox" id="perfil_regulatorio" name="perfil[]" value="regulatorio_financiero" onchange="updateSelected('perfil')">
                  <label for="perfil_regfinanciero">Regulatorio-financiero</label>
                </div>
                <div class="checkbox-item">
                  <input type="checkbox" id="perfil_empresas_reguladas" name="perfil[]" value="empresas_reguladas" onchange="updateSelected('perfil')">
                  <label for="empresas_reguladas">Otras empresas reguladas</label>
                </div>
                <div class="checkbox-item">
                  <input type="checkbox" id="perfil_conocimiento_legal" name="perfil[]" value="conocimiento_legal" onchange="updateSelected('perfil')">
                  <label for="conocimiento_legal">Departamento del conocimiento legal</label>
                </div>
                <div class="checkbox-item">
                  <input type="checkbox" id="perfil_abogado" name="perfil[]" value="abogado_especializado" onchange="updateSelected('perfil')">
                  <label for="perfil_especializado">Abogado</label>
                </div>
                <div class="checkbox-item">
                  <input type="checkbox" id="perfil_otro" name="perfil[]" value="otro" onchange="updateSelected('perfil')">
                  <label for="perfil_otro">Otro</label>
                </div>
              </div>
            </div>
            <!-- Conditional fields -->
            <div class="conditional-field" id="especializacion_field">
              <input type="text" id="especializacion" name="especializacion" placeholder="Indica tu sector específico (ej: derecho mercantil)" class="conditional-input">
            </div>
            <div class="conditional-field" id="otro_perfil_field">
              <input type="text" id="otro_perfil" name="otro_perfil" placeholder="Especifica tu perfil si no encaja en las opciones anteriores" class="conditional-input">
            </div>
          </div>
          
          <div class="form-group">
        
           <label>Contexto</label>
           <div style="font-size: 14px;">Indica tus áreas de interés para que nuestra IA desarrolle tu <span class="highlight">avatar jurídico personalizado</span></div>
            <textarea
              id="area_interes"
              name="area_interes"
              class="area-interes"
              placeholder="Ej: Abogado especializado en mercados de valores, con especial interés en:
         - Ofertas Públicas de Adquisición (OPAs)
         - Titulización de activos
         - Procedimientos sancionadores de la CNMV..."
            ></textarea>
          </div>
          </div>
          
          <!--
          <div class="form-group">
            <label for="area_interes">Área de interés</label>
            <input type="text" id="area_interes" name="area_interes" placeholder="Ej: Abogado especializado en mercados de valores, con especial interés en Ofertas Públicas de Adquisición (OPAs), titulización de activos y procedimientos sancionadores de la CNMV">
          </div>
          -->

          <!--
          <div class="form-group">
            <label for="linkedin">LinkedIn</label>
            <input type="url" id="linkedin" name="linkedin" placeholder="URL de tu perfil de LinkedIn">
          </div>
          <div class="form-group">
            <label for="webEmpresa">Web de la Empresa</label>
            <input type="url" id="webEmpresa" name="webEmpresa" placeholder="URL de la web de la empresa">
          </div>
          -->
         
        </div>
        
        <!-- Cobertura Legal Section -->
        <div class="section">
          <h3>Cobertura Legal</h3>
          <div class="form-group">
            <label>Normativa de la UE, Estatal y Autonómica</label>
            <!-- Selected sources will appear here -->
            <div id="fuentes-selected" class="selected-tags"></div>
            <div class="dropdown-group">
              <button type="button" class="dropdown-toggle" onclick="toggleDropdown('cobertura-dropdown-fuentes')">Selecciona fuentes legales </button>
                <div id="cobertura-dropdown-fuentes" class="dropdown-options">
                  <div class="checkbox-item">
                    <input type="checkbox" id="boe" name="fuentes[]" value="boe" onchange="updateSelected('cobertura')">
                    <label for="boe">Boletín Oficial del Estado (BOE)</label>
                  </div>
                  <div class="checkbox-item">
                    <input type="checkbox" id="doue" name="fuentes[]" value="doue" onchange="updateSelected('cobertura')">
                    <label for="doue">Diario Oficial de la Unión Europea (DOUE)</label>
                  </div>
                  <div class="checkbox-item">
                    <input type="checkbox" id="bocg" name="fuentes[]" value="bocg" onchange="updateSelected('cobertura')">
                    <label for="bocg">Boletín Oficial de las Cortes Generales (BOCG)</label>
                  </div>
                  <div class="checkbox-item">
                    <input type="checkbox" id="boa" name="fuentes[]" value="boa" onchange="updateSelected('cobertura')">
                    <label for="boa">Boletín Oficial de Aragón (BOA)</label>
                  </div>
                  <div class="checkbox-item">
                    <input type="checkbox" id="bocyl" name="fuentes[]" value="bocyl" onchange="updateSelected('cobertura')">
                    <label for="bocyl">Boletín Oficial de Castilla y León (BOCyL)</label>
                  </div>
                  <div class="checkbox-item">
                    <input type="checkbox" id="bocm" name="fuentes[]" value="bocm" onchange="updateSelected('cobertura')">
                    <label for="bocm">Boletín Oficial de la Comunidad de Madrid (BOCM)</label>
                  </div>
                  <div class="checkbox-item">
                    <input type="checkbox" id="dogc" name="fuentes[]" value="dogc" onchange="updateSelected('cobertura')">
                    <label for="docg">Diario Oficial de la Generalitat Catalana (DOGC)</label>
                  </div>
                  <div class="checkbox-item">
                    <input type="checkbox" id="dog" name="fuentes[]" value="dog" onchange="updateSelected('cobertura')">
                    <label for="dog">Diario Oficial de Galicia (DOG)</label>
                  </div>
                  <div class="checkbox-item">
                    <input type="checkbox" id="boja" name="fuentes[]" value="boja" onchange="updateSelected('cobertura')">
                    <label for="boja">Boletín Oficial de la Junta de Andalucía (BOJA)</label>
                  </div>
                  <div class="checkbox-item">
                    <input type="checkbox" id="bopv" name="fuentes[]" value="bopv" onchange="updateSelected('cobertura')">
                    <label for="bopv">Boletín Oficial del País Vasco (BOPV)</label>
                  </div>
                </div>
              </div>
          </div>
          <div class="form-group">
            <label>Reguladores</label>
            <!-- Selected reguladores will appear here -->
            <div id="reguladores-selected" class="selected-tags"></div>
            <div class="dropdown-group">
                <button type="button" class="dropdown-toggle" onclick="toggleDropdown('cobertura-dropdown-reguladores')">Selecciona reguladores</button>
                <div id="cobertura-dropdown-reguladores" class="dropdown-options">
                   <div class="checkbox-item">
                    <input type="checkbox" id="cnmv" name="reguladores[]" value="cnmv" onchange="updateSelected('reguladores')">
                    <label for="cnmv">Comisión Nacional del Mercado de Valores (CNMV)</label>
                   </div>
                   <div class="checkbox-item">
                    <input type="checkbox" id="cnmc" name="reguladores[]" value="cnmc" onchange="updateSelected('reguladores')">
                    <label for="cnmc">Comisión Nacional de los Mercados y la Competencia (CNMC)</label>
                   </div>
                   <div class="checkbox-item">
                    <input type="checkbox" id="aepd" name="reguladores[]" value="aepd" onchange="updateSelected('reguladores')">
                    <label for="aepd">Agencia Española de Protección de Datos (AEPD)</label>
                   </div>
                 </div>
            </div>
          </div>
        
        </div>
        
        <button type="submit" class="btn-siguiente">Siguiente</button>
      </form>
    </div>
  </div>

  <script src="paso1.js"></script>
  <script>
        function toggleMenu() {
            const menu = document.querySelector('.menu');
            menu.classList.toggle('active');
            }
            // Close the menu if clicking outside of it
    document.addEventListener('click', function(event) {
        const menu = document.querySelector('.menu');
        const hamburger = document.querySelector('.hamburger');
        
        if (!menu.contains(event.target) && !hamburger.contains(event.target)) {
            menu.classList.remove('active');
        }
    });
</script>
  <script>
    // Toggle dropdown visibility
    function toggleDropdown(dropdownId) {
      const dropdown = document.getElementById(dropdownId);
      dropdown.style.display = (dropdown.style.display === "block") ? "none" : "block";
    }
    
    // Update selected tags for either 'perfil' or 'cobertura'
    function updateSelected(section) {
      let containerId, inputName;
      if (section === 'perfil') {
        containerId = 'perfil-selected';
        inputName = 'perfil[]';
      } else if (section === 'cobertura') {
        containerId = 'fuentes-selected';
        inputName = 'fuentes[]';
      } else if (section === 'reguladores') {
        containerId = 'reguladores-selected';
        inputName = 'reguladores[]';
      }
      const container = document.getElementById(containerId);
      container.innerHTML = "";
      const inputs = document.querySelectorAll(`input[name="${inputName}"]`);
      inputs.forEach(input => {
        if (input.checked) {
          const tag = document.createElement("div");
          tag.className = "tag";
          // Use the label's text for display
          tag.textContent = input.nextElementSibling.textContent;
          const removeSpan = document.createElement("span");
          removeSpan.className = "tag-remove";
          removeSpan.textContent = "×";
          removeSpan.onclick = function() {
            input.checked = false;
            updateSelected(section);
          };
          tag.appendChild(removeSpan);
          container.appendChild(tag);
        }
      });
    }

    // Hacer que los elementos checkbox-item sean clickeables
// Hacer que los elementos checkbox-item sean clickeables
document.addEventListener('DOMContentLoaded', function() {
  // Asegurarse de que este código se ejecute después de que el DOM esté completamente cargado
  setTimeout(() => {
    const checkboxItems = document.querySelectorAll('.checkbox-item');
    
    checkboxItems.forEach(item => {
      // Eliminar cualquier event listener existente para evitar duplicados
      item.removeEventListener('click', handleCheckboxItemClick);
      // Añadir el nuevo event listener
      item.addEventListener('click', handleCheckboxItemClick);
    });
  }, 100);
});

// Función separada para manejar el clic en checkbox-item
function handleCheckboxItemClick(event) {
  // Evitar que el clic se propague si es en el checkbox o en el botón de eliminar
  if (event.target.type === 'checkbox' || event.target.classList.contains('tag-remove')) {
    return;
  }
  
  // Encontrar el checkbox dentro del item
  const checkbox = this.querySelector('input[type="checkbox"]');
  if (checkbox) {
    // Cambiar el estado del checkbox
    checkbox.checked = !checkbox.checked;
    
    // Disparar el evento change para actualizar la UI
    const changeEvent = new Event('change', { bubbles: true });
    checkbox.dispatchEvent(changeEvent);
  }
}

// Variable para almacenar los dropdowns abiertos
let openDropdowns = [];

// Toggle dropdown visibility
function toggleDropdown(dropdownId) {
  const dropdown = document.getElementById(dropdownId);
  if (dropdown.style.display === "block") {
    dropdown.style.display = "none";
    // Eliminar de la lista de dropdowns abiertos
    openDropdowns = openDropdowns.filter(id => id !== dropdownId);
  } else {
    dropdown.style.display = "block";
    // Agregar a la lista de dropdowns abiertos
    openDropdowns.push(dropdownId);
  }
}

// Cerrar todos los dropdowns abiertos
function closeAllDropdowns() {
  openDropdowns.forEach(dropdownId => {
    const dropdown = document.getElementById(dropdownId);
    if (dropdown) {
      dropdown.style.display = "none";
    }
  });
  openDropdowns = [];
}

// Manejar clics en cualquier parte del documento
document.addEventListener('click', function(event) {
  // Si el clic no fue dentro de un dropdown o en un botón de dropdown
  if (!event.target.closest('.dropdown-options') && 
      !event.target.closest('.dropdown-toggle') &&
      !event.target.classList.contains('tag-remove')) {
    closeAllDropdowns();
  }
});

// Función para hacer clickeables los elementos de los dropdowns de normativa y reguladores
document.addEventListener('DOMContentLoaded', function() {
  // Función para manejar el clic en los elementos label
  function handleLabelClick(event) {
    // Si el clic fue directamente en el checkbox, no hacer nada adicional
    if (event.target.type === 'checkbox') return;
    
    // Prevenir el comportamiento por defecto del label
    event.preventDefault();
    
    // Encontrar el checkbox dentro del label
    const checkbox = this.querySelector('input[type="checkbox"]');
    if (checkbox) {
      // Cambiar el estado del checkbox
      checkbox.checked = !checkbox.checked;
      
      // Disparar el evento change para actualizar la UI
      const changeEvent = new Event('change', { bubbles: true });
      checkbox.dispatchEvent(changeEvent);
    }
  }
  
  // Función para aplicar el comportamiento a todos los labels en dropdowns
  function makeDropdownLabelsClickable() {
    // Seleccionar todos los labels dentro de dropdown-options
    const dropdownLabels = document.querySelectorAll('.dropdown-options label');
    
    dropdownLabels.forEach(label => {
      // Eliminar cualquier event listener existente para evitar duplicados
      label.removeEventListener('click', handleLabelClick);
      // Añadir el nuevo event listener
      label.addEventListener('click', handleLabelClick);
    });
  }
  
  // Aplicar inicialmente
  setTimeout(makeDropdownLabelsClickable, 500);
  
  // Aplicar cada vez que se muestre un dropdown
  const dropdownToggles = document.querySelectorAll('.dropdown-toggle');
  dropdownToggles.forEach(toggle => {
    toggle.addEventListener('click', function() {
      // Dar tiempo para que el dropdown se muestre
      setTimeout(makeDropdownLabelsClickable, 100);
    });
  });
  
  // También observar cambios en el DOM para detectar nuevos elementos
  const observer = new MutationObserver(function(mutations) {
    let needsUpdate = false;
    
    mutations.forEach(function(mutation) {
      if (mutation.addedNodes.length) {
        needsUpdate = true;
      }
    });
    
    if (needsUpdate) {
      setTimeout(makeDropdownLabelsClickable, 100);
    }
  });
  
  // Iniciar la observación del documento
  observer.observe(document.body, { childList: true, subtree: true });
});


  </script>
</body>
</html>