# Reversa - Migración a estructura empresarial (Llyc)
# --------------------------------------------------
# Uso recomendado (WSL/Linux):
# 1) Edita DB_URI (línea más abajo) con la cadena correcta de MongoDB.
# 2) DRY RUN (no escribe cambios):
#    set -a; source scripts/migrate_enterprise.env; set +a; node scripts/migrate_to_enterprise.js
# 3) APLICAR cambios (tras revisar la salida del dry run):
#    set -a; source scripts/migrate_enterprise.env; set +a; MIGRATE_DRY_RUN=false node scripts/migrate_to_enterprise.js
# 4) Verificar empresa/usuarios:
#    node scripts/verify_ws_enterprise.js
#
# Notas:
# - MIGRATE_USE_ADMIN_AS_EMPRESA_ID=true: si no existe la empresa, creará el doc con _id = antiguo _id del admin,
#   y al admin le asignará un nuevo _id (guardando user_id_old). Esto preserva históricos por id.
# - Ajusta MIGRATE_ADMIN_EMAIL para elegir quién será admin (el otro quedará con permiso por defecto).
# - Puedes listar correos legacy cuyo ObjectId quieras conservar en empresa en MIGRATE_LEGACY_USER_EMAILS.
# - Este archivo define variables estilo .env; el sourcing con "set -a; source …; set +a" las exporta para Node.

# =====================
# Variables de conexión
# =====================
DB_URI="mongodb+srv://santi:Jensen1620@papyrus.n1c6zst.mongodb.net/?retryWrites=true&w=majority&appName=papyrus"


# =====================
# Variables de migración
# =====================
MIGRATE_USER_EMAILS="sperez@ga-p.com,ilanda@ga-p.com"
MIGRATE_ADMIN_EMAIL="ilanda@ga-p.com"            # admin GA-P
MIGRATE_DOMAIN="ga-p.com"
MIGRATE_DEFAULT_PERMISO="lectura"                 # "lectura" o "edicion" para el no-admin
MIGRATE_USE_ADMIN_AS_EMPRESA_ID="true"            # recomendado para preservar históricos por id
MIGRATE_LEGACY_USER_EMAILS=""                     # opcional, lista separada por comas
MIGRATE_DRY_RUN="false"                           # ejecutar directamente (sin dry run)


