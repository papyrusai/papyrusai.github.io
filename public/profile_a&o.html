<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <title>Profile A&amp;O</title>
  <link rel="icon" href="assets/papyrus_logo.png" type="image/png">
  <link rel="stylesheet" type="text/css" href="styles/styles.css" />
  <link rel="stylesheet" type="text/css" href="styles/menu.css" />
  <link rel="stylesheet" type="text/css" href="styles/toggle.css" />
  <link rel="stylesheet" type="text/css" href="styles/dropdown.css" />
  <link rel="stylesheet" type="text/css" href="styles/radio_menu.css" />
  <link rel="stylesheet" type="text/css" href="styles/mobile.css" />
  <style>
    /* Additional styles for dropdowns */
    #serviciosDropdown, #tipoDropdown, #rangoDropdown {
      max-height: 200px;
      overflow-y: auto;
      position: absolute;
      z-index: 1000;
    }
    #serviciosDropdown .dropdown-bottom,
    #tipoDropdown .dropdown-bottom,
    #rangoDropdown .dropdown-bottom {
      text-align: center;
      padding: 5px;
      border-top: 1px solid #ccc;
      cursor: pointer;
    }
    .dropdown { position: relative; }

    /* Boletín Oficial: only BOE selectable (others are dimmed) */
    .filter-options input[type="checkbox"]:not([value="BOE"]) {
      opacity: 0.5;
      pointer-events: none;
    }
    .client-logo{
        height: 160px;
    }

    @media (max-width: 600px) {
     .client-logo{
        height: 120px;
    }
}
  </style>
</head>
<body>
  <nav class="navbar">
    <div class="logo">
      <a href="https://www.papyrus-ai.com/" target="_blank">
        <img src="assets/papyrus_app.png" alt="Papyrus Logo" style="height: 55px;">
      </a>
    </div>
    <button class="hamburger" onclick="toggleMenu()">☰</button>
    <ul class="menu">
      <li><a href="https://papyrus-ai.com/">WEB</a></li>
      <li><a href="/profile_a&o">PANEL DE CONTROL</a></li>
      <li><a href="http://app.papyrus-ai.com/suscripcion.html">EDITAR SUSCRIPCIÓN</a></li>
      <li><a href="https://papyrus-ai.com/pages/contact-1">AYUDA</a></li>
    </ul>
  </nav>

  <!-- Profile Header with A&O logo -->
  <div class="profile-header" style="display: flex; align-items: center; gap: 15px; margin: 20px;">
    <img class="client-logo" src="assets/a&o_logo.png" alt="A&amp;O Logo" >
  </div>

  <h1>Resumen diario Boletines Oficiales</h1>
  <div id="data-container">
    <!-- Filter Section -->
    <div id="Filtrar">
      <!-- Servicios A&O Dropdown -->
      <div class="filter-item">
        <div class="etiquetas-label">Industrias A&amp;O Shearman </div>
        <div class="dropdown" style="margin-bottom: 10px;">
          <button onclick="toggleServiciosDropdown()" class="dropbtn">
            <span id="selectedServicio">Todos</span>
            <i class="fa fa-caret-down"></i>
          </button>
          <div id="serviciosDropdown" class="dropdown-content">
            <a href="#" onclick="selectServicio('Todos')">Todos</a>
            <a href="#" onclick="selectServicio('Chemicals')">Chemicals</a>
            <a href="#" onclick="selectServicio('Consumer and retail')">Consumer and retail</a>
            <a href="#" onclick="selectServicio('Communications, media and entertainment - Sports')">
              Communications, media and entertainment - Sports
            </a>
            <a href="#" onclick="selectServicio('Communications, media and entertainment - Media')">
              Communications, media and entertainment - Media
            </a>
            <a href="#" onclick="selectServicio('Communications, media and entertainment - Telecommunications')">
              Communications, media and entertainment - Telecommunications
            </a>
            <a href="#" onclick="selectServicio('Energy - Oil and gas')">Energy - Oil and gas</a>
            <a href="#" onclick="selectServicio('Energy - Hydrogen')">Energy - Hydrogen</a>
            <a href="#" onclick="selectServicio('Energy - Carbon capture and storage')">Energy - Carbon capture and storage</a>
            <a href="#" onclick="selectServicio('Energy - Power')">Energy - Power</a>
            <a href="#" onclick="selectServicio('Energy - Energy networks')">Energy - Energy networks</a>
            <a href="#" onclick="selectServicio('Energy - Nuclear')">Energy - Nuclear</a>
            <a href="#" onclick="selectServicio('Financial institutions - Banks')">Financial institutions - Banks</a>
            <a href="#" onclick="selectServicio('Financial institutions - Insurance')">Financial institutions - Insurance</a>
            <a href="#" onclick="selectServicio('Financial institutions - Fintech')">Financial institutions - Fintech</a>
            <a href="#" onclick="selectServicio('Industrials and manufacturing - Automotive')">
              Industrials and manufacturing - Automotive
            </a>
            <a href="#" onclick="selectServicio('Industrials and manufacturing - Aerospace and defense')">
              Industrials and manufacturing - Aerospace and defense
            </a>
            <a href="#" onclick="selectServicio('Infrastructure and transport - Aviation')">
              Infrastructure and transport - Aviation
            </a>
            <a href="#" onclick="selectServicio('Infrastructure and transport - Digital infrastructure')">
              Infrastructure and transport - Digital infrastructure
            </a>
            <a href="#" onclick="selectServicio('Life sciences and healthcare')">Life sciences and healthcare</a>
            <a href="#" onclick="selectServicio('Mining and metals')">Mining and metals</a>
            <a href="#" onclick="selectServicio('Private capital - Family office')">Private capital - Family office</a>
            <a href="#" onclick="selectServicio('Private capital - Infrastructure funds')">Private capital - Infrastructure funds</a>
            <a href="#" onclick="selectServicio('Private capital - Private credit')">Private capital - Private credit</a>
            <a href="#" onclick="selectServicio('Private capital - Private equity')">Private capital - Private equity</a>
            <a href="#" onclick="selectServicio('Private capital - Sovereign wealth and institutional investors')">
              Private capital - Sovereign wealth and institutional investors
            </a>
            <a href="#" onclick="selectServicio('Capital solutions')">Capital solutions</a>
            <a href="#" onclick="selectServicio('Technology')">Technology</a>
            <div class="dropdown-bottom" onclick="toggleServiciosDropdown()">
              <i class="fa fa-caret-down"></i>
            </div>
          </div>
        </div>
      </div>

      <!-- Tipo disposición -->
      <div class="filter-item">
        <div class="etiquetas-label">Tipo disposición</div>
        <div class="dropdown" style="margin-bottom: 10px;">
          <button onclick="toggleTipoDropdown()" class="dropbtn">
            <span id="selectedTipo">Todos</span>
            <i class="fa fa-caret-down"></i>
          </button>
          <div id="tipoDropdown" class="dropdown-content">
            <a href="#" onclick="selectTipo('Todos')">Todos</a>
            <a href="#" onclick="selectTipo('Disposiciones generales')">Disposiciones generales</a>
            <a href="#" onclick="selectTipo('Otras disposiciones')">Otras disposiciones</a>
            <div class="dropdown-bottom" onclick="toggleTipoDropdown()">
              <i class="fa fa-caret-down"></i>
            </div>
          </div>
        </div>
      </div>

      <!-- Rango -->
      <div class="filter-item">
        <div class="etiquetas-label">Rango</div>
        <div class="dropdown" style="margin-bottom: 10px;">
          <button onclick="toggleRangoDropdown()" class="dropbtn">
            <span id="selectedRango">Todos</span>
            <i class="fa fa-caret-down"></i>
          </button>
          <div id="rangoDropdown" class="dropdown-content">
            <a href="#" onclick="selectRango('Todos')">Todos</a>
            <a href="#" onclick="selectRango('Leyes')">Leyes</a>
            <a href="#" onclick="selectRango('Reglamentos')">Reglamentos</a>
            <a href="#" onclick="selectRango('Decisiones interpretativas y Reguladores')">
              Decisiones interpretativas y Reguladores
            </a>
            <a href="#" onclick="selectRango('Jurisprudencia')">Jurisprudencia</a>
            <a href="#" onclick="selectRango('Ayudas,subvenciones y premios')">Ayudas, subvenciones y premios</a>
            <a href="#" onclick="selectRango('Otras')">Otras</a>
            <div class="dropdown-bottom" onclick="toggleRangoDropdown()">
              <i class="fa fa-caret-down"></i>
            </div>
          </div>
        </div>
      </div>

      <!-- Boletín Oficial (only BOE is selectable) -->
      <div class="filter-item">
        <div class="filter-section">
          <div class="etiquetas-label">Boletín Oficial</div>
          <div class="filter-options">
            <label class="filter-option">
              <input type="checkbox" name="boletin" value="BOE" checked> BOE
            </label>
            <label class="filter-option">
              <input type="checkbox" name="boletin" value="BOCM" disabled> BOCM
            </label>
            <label class="filter-option">
              <input type="checkbox" name="boletin" value="BOA" disabled> BOA
            </label>
            <label class="filter-option">
              <input type="checkbox" name="boletin" value="BOJA" disabled> BOJA
            </label>
            <label class="filter-option">
              <input type="checkbox" name="boletin" value="BOPV" disabled> BOPV
            </label>
            <label class="filter-option">
              <input type="checkbox" name="boletin" value="DOUE" disabled> DOUE
            </label>
          </div>
        </div>
      </div>
    </div>

    <div style="text-align: right;">
      <button id="buscarBtn" onclick="handleBuscar_ao()">Buscar</button>
    </div>

    <!-- Documentos Section -->
    <div class="analytics-label">Documentos - Día {{documentDate}}</div>
    <div class="collectionDocs">
      {{boeDocuments}}
    </div>
  </div>

  <div class="logout-container">
    <a href="/logout">Logout</a>
  </div>

  <script>
    // Menu toggling
    function toggleMenu() {
      const menu = document.querySelector('.menu');
      menu.classList.toggle('active');
    }

    // On click anywhere else, close dropdowns & menu
    document.addEventListener('click', function(event) {
      // Hide Servicios dropdown if open
      const serviciosDropdown = document.getElementById('serviciosDropdown');
      if (serviciosDropdown && serviciosDropdown.classList.contains('show')
          && !event.target.closest('.dropdown')) {
        serviciosDropdown.classList.remove('show');
      }

      // Hide Tipo dropdown if open
      const tipoDropdown = document.getElementById('tipoDropdown');
      if (tipoDropdown && tipoDropdown.classList.contains('show')
          && !event.target.closest('.dropdown')) {
        tipoDropdown.classList.remove('show');
      }

      // Hide Rango dropdown if open
      const rangoDropdown = document.getElementById('rangoDropdown');
      if (rangoDropdown && rangoDropdown.classList.contains('show')
          && !event.target.closest('.dropdown')) {
        rangoDropdown.classList.remove('show');
      }

      // Hide hamburger menu if clicking outside
      const menu = document.querySelector('.menu');
      const hamburger = document.querySelector('.hamburger');
      if (!menu.contains(event.target) && !hamburger.contains(event.target)) {
        menu.classList.remove('active');
      }
    });

    // Servicios toggling
    function toggleServiciosDropdown() {
      const dropdown = document.getElementById('serviciosDropdown');
      dropdown.classList.toggle('show');
    }
    function selectServicio(servicio) {
      document.getElementById('selectedServicio').textContent = servicio;
      document.getElementById('serviciosDropdown').classList.remove('show');
    }

    // Tipo toggling
    function toggleTipoDropdown() {
      const dropdown = document.getElementById('tipoDropdown');
      dropdown.classList.toggle('show');
    }
    function selectTipo(tipo) {
      document.getElementById('selectedTipo').textContent = tipo;
      document.getElementById('tipoDropdown').classList.remove('show');
    }

    // Rango toggling
    function toggleRangoDropdown() {
      const dropdown = document.getElementById('rangoDropdown');
      dropdown.classList.toggle('show');
    }
    function selectRango(rango) {
      document.getElementById('selectedRango').textContent = rango;
      document.getElementById('rangoDropdown').classList.remove('show');
    }

    // Filtering logic
    function handleBuscar_ao() {
      // Read user’s selected values
      const servicio = document.getElementById('selectedServicio').textContent.trim();
      const tipo = document.getElementById('selectedTipo').textContent.trim();
      const rango = document.getElementById('selectedRango').textContent.trim();

      // All documents
      const docs = document.querySelectorAll('.collectionDocs .data-item');
      docs.forEach(doc => {
        // 1) The text in etiquetas-values => used to check "Servicios"
        const etiquetasText = doc.querySelector('.etiquetas-values').innerText;

        // 2) The hidden doc-seccion => used to check "Tipo disposición"
        const seccionText = doc.querySelector('.doc-seccion').innerText;

        // 3) The hidden doc-rango => used to check "Rango"
        const rangoText = doc.querySelector('.doc-rango').innerText;

        let matchServicio = (servicio === 'Todos') || etiquetasText.includes(servicio);
        let matchTipo = (tipo === 'Todos') || seccionText.includes(tipo);
        let matchRango = (rango === 'Todos') || rangoText.includes(rango);

        if (matchServicio && matchTipo && matchRango) {
          doc.style.display = '';
        } else {
          doc.style.display = 'none';
        }
      });
    }
  </script>
</body>
</html>
